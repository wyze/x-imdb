<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-ajax/core-ajax.html">

<!--
Element providing solution to no problem in particular.

##### Example

    <x-imdb></x-imdb>

@element x-imdb
@blurb Element providing solution to no problem in particular.
@status alpha
@homepage http://wyze.github.io/x-imdb
-->
<polymer-element name="x-imdb" attributes="imdbid">

  <template>

    <link rel="stylesheet" href="x-imdb.css" />

    <content></content>

    <core-ajax id="ajax" handleAs="json" response="{{resp}}" url="http://omdbapi.com/"></core-ajax>

    <label>Title</label><span>{{resp.Title}}</span>

  </template>

  <script>

    Polymer('x-imdb', {
      /**
       * The `noevent` event is not actually fired from here,
       * we document it as an example of documenting events.
       *
       * @event noevent
       */

      /**
       * The `imdbid` attribute does not yet have a purpose.
       *
       * @attribute imdbid
       * @type string
       */
      imdbid: '',

      /**
       * The `aProp` is a property that does something cool.
       *
       * @property aProp
       * @type bool
       */
      aProp: false,

      ready: function() {
        var $ajax = this.$.ajax;

        // validate our required property
        if ( !/^t{2}?\d{7}$/.test(this.imdbid) )
          throw 'Please provide a proper IMDB ID.';

        $ajax.params = { "i": this.imdbid.replace(/^([^tt])/, 'tt$1') };
        $ajax.go();
      },

      /**
       * The `task` method does no work at this time.
       *
       * @method task
       * @return {Object} Returns undefined.
       * @param {String} dummy Serves no purpose today.
       */
      task: function(dummy) {
      }

    });

  </script>

</polymer-element>
